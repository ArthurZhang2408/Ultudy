# Production Environment Variables for Ultudy Backend
# Copy this to your Railway/Render dashboard environment variables

# ============================================
# DATABASE
# ============================================
DATABASE_URL=postgresql://user:password@host.neon.tech/ultudy?sslmode=require

# Optional: Read replica for scaling (see SCALABILITY_GUIDE.md)
# DATABASE_REPLICA_URL=postgresql://user:password@replica.neon.tech/ultudy?sslmode=require

# ============================================
# AUTHENTICATION
# ============================================
# Mode: 'jwt' for production, 'dev' for development
AUTH_MODE=jwt

# Clerk JWT Configuration (get from https://clerk.com dashboard)
AUTH_JWT_ISS=https://your-app.clerk.accounts.dev
AUTH_JWT_AUD=your-audience
AUTH_JWT_JWKS_URL=https://your-app.clerk.accounts.dev/.well-known/jwks.json

# ============================================
# AI PROVIDER
# ============================================
# Options: 'gemini', 'openai', 'mock'
LLM_PROVIDER=gemini

# Gemini (Recommended - get from https://aistudio.google.com/)
GEMINI_API_KEY=your-gemini-api-key-here
GEMINI_GEN_MODEL=gemini-1.5-flash
GEMINI_VISION_MODEL=gemini-1.5-flash

# OpenAI (Alternative)
# OPENAI_API_KEY=sk-...
# OPENAI_MODEL=gpt-4o-mini

# ============================================
# APPLICATION
# ============================================
NODE_ENV=production
PORT=3001

# CORS - Add your frontend domain(s)
ALLOWED_ORIGINS=https://ultudy.com,https://www.ultudy.com

# File Upload
MAX_FILE_SIZE_MB=50

# ============================================
# REDIS - REQUIRED FOR UPLOAD PROGRESS ANIMATION
# ============================================
# Redis is REQUIRED for async job processing (upload progress animation)
# Without Redis, uploads complete instantly without showing progress
#
# Setup Options:
#   1. Railway Redis Plugin (Free tier: 25 MB, recommended)
#      Railway Dashboard → Add Service → Redis
#      Copy REDIS_URL from Redis service variables
#
#   2. Upstash Redis (Free tier: 10k commands/day)
#      https://upstash.com → Create database
#
#   3. Redis Cloud (Free tier: 30 MB)
#      https://redis.com/try-free/
#
# Format: redis://default:password@host:port or rediss://... (SSL)
REDIS_URL=redis://default:password@redis-xyz.railway.internal:6379

# ============================================
# OPTIONAL: AWS S3 STORAGE (Recommended for scaling)
# ============================================
# Get from AWS Console (see SCALABILITY_GUIDE.md)
# AWS_ACCESS_KEY_ID=AKIA...
# AWS_SECRET_ACCESS_KEY=...
# AWS_S3_BUCKET=ultudy-pdfs
# AWS_REGION=us-east-1

# ============================================
# DATABASE POOL CONFIGURATION
# ============================================
# Current settings support ~1,000 concurrent users
DB_POOL_MIN=2
DB_POOL_MAX=100
DB_POOL_IDLE_TIMEOUT_MS=30000
DB_POOL_CONNECTION_TIMEOUT_MS=10000

# ============================================
# JOB QUEUE CONFIGURATION
# ============================================
# Bull queue settings (uses Redis if available, in-memory otherwise)
QUEUE_CONCURRENCY=5
QUEUE_MAX_RETRIES=3
